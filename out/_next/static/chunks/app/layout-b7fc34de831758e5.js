(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{5269:function(e,t,n){Promise.resolve().then(n.bind(n,4362)),Promise.resolve().then(n.t.bind(n,5660,23))},257:function(e,t,n){"use strict";var r,s;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(s=n.g.process)?void 0:s.env)?n.g.process:n(4227)},4227:function(e){!function(){var t={229:function(e){var t,n,r,s=e.exports={};function o(){throw Error("setTimeout has not been defined")}function c(){throw Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{n="function"==typeof clearTimeout?clearTimeout:c}catch(e){n=c}}();var u=[],i=!1,l=-1;function h(){i&&r&&(i=!1,r.length?u=r.concat(u):l=-1,u.length&&d())}function d(){if(!i){var e=a(h);i=!0;for(var t=u.length;t;){for(r=u,u=[];++l<t;)r&&r[l].run();l=-1,t=u.length}r=null,i=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===c||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function y(e,t){this.fun=e,this.array=t}function m(){}s.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new y(e,t)),1!==u.length||i||a(d)},y.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=m,s.addListener=m,s.once=m,s.off=m,s.removeListener=m,s.removeAllListeners=m,s.emit=m,s.prependListener=m,s.prependOnceListener=m,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},n={};function r(e){var s=n[e];if(void 0!==s)return s.exports;var o=n[e]={exports:{}},c=!0;try{t[e](o,o.exports,r),c=!1}finally{c&&delete n[e]}return o.exports}r.ab="//";var s=r(229);e.exports=s}()},4362:function(e,t,n){"use strict";n.d(t,{AuthProvider:function(){return u},a:function(){return a}});var r=n(7437),s=n(2265),o=n(1837);let c=(0,s.createContext)(void 0),a=()=>{let e=(0,s.useContext)(c);if(!e)throw Error("useAuth must be used within AuthProvider");return e},u=e=>{let{children:t}=e,[n,a]=(0,s.useState)(null),[u,i]=(0,s.useState)(null);(0,s.useEffect)(()=>{{let e=localStorage.getItem("token"),t=localStorage.getItem("user");e&&(i(e),t&&a(JSON.parse(t)))}},[]);let l=async(e,t)=>{let n=await o.h.login(e,t);i(n.token),a(n.user),o.h.setToken(n.token),localStorage.setItem("user",JSON.stringify(n.user))},h=(null==n?void 0:n.role)==="admin",d=(null==n?void 0:n.role)==="volunteer";return(0,r.jsx)(c.Provider,{value:{user:n,token:u,login:l,logout:()=>{a(null),i(null),o.h.setToken(null),localStorage.removeItem("user")},isAdmin:h,isVolunteer:d,isAuthenticated:!!n&&!!u},children:t})}},1837:function(e,t,n){"use strict";n.d(t,{h:function(){return o}});let r=n(257).env.NEXT_PUBLIC_API_URL||"";class s{setToken(e){this.token=e,e?localStorage.setItem("token",e):localStorage.removeItem("token")}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={"Content-Type":"application/json"};t.headers&&(t.headers instanceof Headers?t.headers.forEach((e,t)=>{n[t]=e}):Array.isArray(t.headers)?t.headers.forEach(e=>{let[t,r]=e;n[t]=r}):Object.assign(n,t.headers)),this.token&&(n.Authorization="Bearer ".concat(this.token));let r="".concat(this.baseUrl).concat(e);console.log("API Request: ".concat(t.method||"GET"," ").concat(r));let s=await fetch(r,{...t,headers:n});if(!s.ok){let e=await s.json().catch(()=>({error:"Request failed"}));throw console.error("API Error (".concat(s.status,"):"),e),Error(e.error||"Request failed")}let o=await s.json();return console.log("API Response from ".concat(r,":"),Array.isArray(o)?"".concat(o.length," items"):"object"),o}async login(e,t){return this.request("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})})}async register(e){return this.request("/auth/register",{method:"POST",body:JSON.stringify(e)})}async getAnnouncements(e){let t=new URLSearchParams(e).toString();return this.request("/announcements".concat(t?"?".concat(t):""))}async createAnnouncement(e){return this.request("/announcements",{method:"POST",body:JSON.stringify(e)})}async updateAnnouncement(e,t){return this.request("/announcements/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteAnnouncement(e){return this.request("/announcements/".concat(e),{method:"DELETE"})}async getSchedules(e){let t=new URLSearchParams(e).toString();return this.request("/schedules".concat(t?"?".concat(t):""))}async createSchedule(e){return this.request("/schedules",{method:"POST",body:JSON.stringify(e)})}async updateSchedule(e,t){return this.request("/schedules/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteSchedule(e){return this.request("/schedules/".concat(e),{method:"DELETE"})}async getHalls(){return this.request("/halls")}async getHallStatus(){return this.request("/halls/status")}async createHall(e){return this.request("/halls",{method:"POST",body:JSON.stringify(e)})}async updateHall(e,t){return this.request("/halls/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteHall(e){return this.request("/halls/".concat(e),{method:"DELETE"})}async getComplaints(e){let t=new URLSearchParams(e).toString();return this.request("/complaints".concat(t?"?".concat(t):""))}async getPublicComplaints(){return this.request("/complaints/public")}async createComplaint(e){return this.request("/complaints",{method:"POST",body:JSON.stringify(e)})}async updateComplaint(e,t){return this.request("/complaints/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async getEvents(e){let t=new URLSearchParams(e).toString();return this.request("/events".concat(t?"?".concat(t):""))}async createEvent(e){return this.request("/events",{method:"POST",body:JSON.stringify(e)})}async updateEvent(e,t){return this.request("/events/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteEvent(e){return this.request("/events/".concat(e),{method:"DELETE"})}async getUsers(){return this.request("/users")}async updateUser(e,t){return this.request("/users/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteUser(e){return this.request("/users/".concat(e),{method:"DELETE"})}async getMenus(e){let t=new URLSearchParams(e).toString();return this.request("/menus".concat(t?"?".concat(t):""))}async createMenu(e){return this.request("/menus",{method:"POST",body:JSON.stringify(e)})}async updateMenu(e,t){return this.request("/menus/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteMenu(e){return this.request("/menus/".concat(e),{method:"DELETE"})}getExportUrl(e){return"".concat(this.baseUrl,"/export/").concat(e)}constructor(){this.token=null,this.baseUrl=r?"".concat(r,"/api"):"/api",this.token=localStorage.getItem("token")}}let o=new s},5660:function(){}},function(e){e.O(0,[152,971,117,744],function(){return e(e.s=5269)}),_N_E=e.O()}]);