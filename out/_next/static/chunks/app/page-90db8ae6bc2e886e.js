(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1387:function(e,t,n){Promise.resolve().then(n.bind(n,7340))},7340:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var s=n(7437),c=n(2265),r=n(2252),a=n(2215),o=n(8553),l=n(1047),i=n(6439),d=n(4766),u=n(1837),h=n(5749),x=n(8836),m=n(1);function f(){let[e,t]=(0,c.useState)([]),[n,f]=(0,c.useState)(!0);(0,c.useEffect)(()=>(p(),h.U.connect(),h.U.on("announcement:new",e=>{t(t=>[e,...t])}),h.U.on("announcement:update",e=>{t(t=>t.map(t=>t._id===e._id?e:t))}),h.U.on("announcement:delete",e=>{let{id:n}=e;t(e=>e.filter(e=>e._id!==n))}),()=>{h.U.off("announcement:new"),h.U.off("announcement:update"),h.U.off("announcement:delete")}),[]);let p=async()=>{try{let e=await u.h.getAnnouncements({limit:50});console.log("Announcements loaded:",e),console.log("Announcements count:",null==e?void 0:e.length),t(e||[])}catch(e){console.error("Failed to load announcements:",e)}finally{f(!1)}},b=e=>{switch(e){case"alert":return(0,s.jsx)(r.Z,{className:"w-5 h-5"});case"transport":return(0,s.jsx)(a.Z,{className:"w-5 h-5"});case"dinner":return(0,s.jsx)(o.Z,{className:"w-5 h-5"});case"cultural":return(0,s.jsx)(l.Z,{className:"w-5 h-5"});default:return(0,s.jsx)(i.Z,{className:"w-5 h-5"})}},g=e=>{switch(e){case"urgent":return"bg-red-50 border-red-200 text-red-900";case"high":return"bg-orange-50 border-orange-200 text-orange-900";default:return"bg-blue-50 border-blue-200 text-blue-900"}},j=e=>{switch(e){case"urgent":return"bg-red-500 text-white";case"high":return"bg-orange-500 text-white";default:return"bg-blue-500 text-white"}};return n?(0,s.jsx)(m.A,{children:(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent"})})}):(0,s.jsx)(m.A,{children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 rounded-xl shadow-lg p-8 text-white",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,s.jsx)(d.Z,{className:"w-8 h-8"}),(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Live Updates"})]}),(0,s.jsx)("p",{className:"text-blue-100",children:"Stay informed with real-time conference announcements"})]}),(0,s.jsx)("div",{className:"space-y-4",children:0===e.length?(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-8 text-center text-gray-500",children:[(0,s.jsx)(i.Z,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),(0,s.jsx)("p",{children:"No announcements yet. Check back later!"})]}):e.map(e=>(0,s.jsxs)("div",{className:"rounded-lg border-2 shadow-md p-5 transition-all hover:shadow-lg ".concat(g(e.priority)),children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-lg ".concat(j(e.priority)),children:b(e.type)}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-lg",children:e.title}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-sm opacity-75 mt-1",children:[(0,s.jsx)("span",{className:"capitalize",children:e.type}),(0,s.jsx)("span",{children:"•"}),(0,s.jsx)("span",{children:(0,x.Q)(new Date(e.createdAt),{addSuffix:!0})})]})]})]}),(0,s.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold uppercase ".concat(j(e.priority)),children:e.priority})]}),(0,s.jsx)("p",{className:"text-base leading-relaxed mb-3",children:e.content}),e.link&&(0,s.jsx)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-sm font-medium hover:underline",children:"View Details →"})]},e._id))})]})})}},5749:function(e,t,n){"use strict";n.d(t,{U:function(){return o}});var s=n(8680),c=n(257);let r=()=>c.env.NEXT_PUBLIC_SOCKET_URL||c.env.NEXT_PUBLIC_API_URL||"";class a{connect(){var e;if(null===(e=this.socket)||void 0===e?void 0:e.connected)return this.socket;let t=r();return this.socket=(0,s.io)(t||window.location.origin,{path:"/api/socket",autoConnect:!0,reconnection:!0,reconnectionDelay:1e3,reconnectionAttempts:5}),this.socket.on("connect",()=>{console.log("Socket connected")}),this.socket.on("disconnect",()=>{console.log("Socket disconnected")}),this.socket}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null)}on(e,t){var n;this.socket||this.connect(),null===(n=this.socket)||void 0===n||n.on(e,t)}off(e,t){var n;null===(n=this.socket)||void 0===n||n.off(e,t)}getSocket(){return this.socket||this.connect(),this.socket}constructor(){this.socket=null}}let o=new a}},function(e){e.O(0,[44,30,589,1,971,117,744],function(){return e(e.s=1387)}),_N_E=e.O()}]);